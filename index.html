<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <title>Ridership in NYC</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>

    <style>
        body {
            margin: 0;
            padding: 0;
            background: #faf0e6;
            font-family: Lato, sans-serif;
            color: #0D0000;
        }
        header {
            padding: 8px 10%;
        }
        h1 {
            display: inline-block;
            margin-right: 10px;
            color:#4682b4;
        }
        h2 {
            display: inline-block;
            color: 	#a68383;
        }
        #map {
            width: 80%;
            height: 540px;
            margin: 10px auto;
        }
        footer {
            padding: 6px 10%;
            width: 80%;
        }
        p {
            font-size: 1em;
            color: #856c6c;
        }
    </style>
<script>function lti_launch( vars, target ) {
						var query = '';
						var new_tab = false;

						for(var key in vars) {
							if(query.length == 0) {
								query += '?' + key + '=' + encodeURIComponent(vars[key]);
							}
							else {
								query += '&' + key + '=' + encodeURIComponent(vars[key]);
							}
						}

						var url = '/d2l/customization/pearsonlti/6606/Launch' + query;(target == '_blank') ? window.open( url, '_blank' ) : location.replace( url );}</script><script src="/d2l/common/iframe/iframe-client.js?v=20.24.10.20212"></script><script src="https://s.brightspace.com/lib/bsi/2024.10.207/unbundled/embeds.js" type="module"></script><script>document.addEventListener('DOMContentLoaded', function() {
					window.D2L.EmbedRenderer.renderEmbeds(document.body);
				});</script><script src="https://s.brightspace.com/lib/bsi/2024.10.207/unbundled/mathjax.js" type="module"></script><script>document.addEventListener('DOMContentLoaded', function() {
						if (document.querySelector('math') || /\$\$|\\\(|\\\[|\\begin{|\\ref{|\\eqref{/.test(document.body.innerHTML)) {
							document.querySelectorAll('mspace[linebreak="newline"]').forEach(elm => {
								elm.setAttribute('style', 'display: block; height: 0.5rem;');
							});

							window.D2L.MathJax.loadMathJax({
								outputScale: 1.5,
								renderLatex: true,
								enableMML3Support: false
							});
						}
					});</script><script src="https://s.brightspace.com/lib/bsi/2024.10.207/unbundled/prism.js" type="module"></script><script>document.addEventListener('DOMContentLoaded', function() {
					document.querySelectorAll('.d2l-code').forEach(code => {
						window.D2L.Prism.formatCodeElement(code);
					});
				});</script><script src="https://s.brightspace.com/lib/bsi/2024.10.207/unbundled/creator.js" type="module"></script><script>document.addEventListener('DOMContentLoaded', async () => {
					const activities = [];
					const practices = [];
					const allPractices = document.querySelectorAll('.d2l-practice');
					const elements = document.querySelectorAll('.d2l-element');
					let layouts = [...document.querySelectorAll('.d2l-cplus-layout')];
					const tables = document.querySelectorAll('table');
					const contentStylerStyleLinks = document.querySelectorAll('head > link[href="https://templates.lcs.brightspace.com/lib/assets/css/styles.min.css"]');
					const contentStylerOverides = document.querySelectorAll('head > link[href^="/d2l/le/contentstyler/"][data-override="override"]');

					layouts = layouts.filter((layout) => layout.closest('.d2l-element.mceNonEditable') === null);

					for (const practice of allPractices) {
						const activityContainer = practice.hasAttribute('data-d2l-activity-href');
						if (activityContainer) {
							activities.push(practice);
						}
						else {
							practices.push(practice);
						}
					}

					if (layouts.length > 0) {
						window.D2L.Creator.convertLayouts(layouts);
					}
					if (elements.length > 0) {
						window.D2L.Creator.convertElements(elements, 6606, '/content/', 'True');
					}
					if (activities.length > 0) {
						window.D2L.Creator.convertPracticeActivities(activities, 6606, '/content/');
					}
					if (practices.length > 0) {
						window.D2L.Creator.convertPractices(practices, 6606, '/content/');
					}
					if (contentStylerStyleLinks.length > 0 && contentStylerOverides.length > 0 && tables.length > 0) {
						window.D2L.Creator.wrapTables(tables);
					}
				});</script><script>document.addEventListener('DOMContentLoaded', function() {
						if (document.documentElement.hasAttribute('lang')) return;
						document.documentElement.setAttribute('lang', 'en-us'); 						
					});</script><script>document.addEventListener('DOMContentLoaded', function() {
						if (document.head.querySelector('title')) return;
						var handleAppendTitle = function(evt) {
							if (!evt || !evt.data) return;

							try {
								var data = JSON.parse(evt.data);
								if (data.handler !== 'd2l.iframe.requestPageTitle' || !data.pageTitle) return;

								window.removeEventListener('message', handleAppendTitle, false);

								var titleElm = document.createElement('title');
								titleElm.textContent = data.pageTitle;
								document.head.appendChild(titleElm);
							} catch (e) {}	
						};

						window.addEventListener('message', handleAppendTitle, false);
						window.parent.postMessage(JSON.stringify({ handler: 'd2l.iframe.requestPageTitle' }), '*');
					});</script><script>window.addEventListener('message', function(event) { 
					if( !event.data ) {
						return;
					}

					let params;
					try {
						params = JSON.parse( event.data );
					}
					catch {
						return;
					}
					if( !params.subject || params.subject !== 'lti.frameResize' ) {
						return;
					}

					const MAX_FRAME_HEIGHT = 10000;
					if( !params.height || params.height < 1 || params.height > MAX_FRAME_HEIGHT ) {
						console.warn( 'Invalid height value received, aborting' );
						return;
					}
					const el = document.getElementsByTagName( 'iframe' );
					for ( let i=0; i < el.length; i++ ) {
						if( el[i].contentWindow === event.source ) {
							el[i].style.height = params.height + 'px';

							console.info( 'Setting iFrame height to ' + params.height );

							if( el[i].getAttribute('lockwidth') !== 'true'){
								el[i].style.width = '100%';
								console.info( 'Setting iFrame width to 100%' );
							}
						}
					}
				});</script></head>

<body>
    <header>
        <h1>Mapping NYC's Busiest Subway Stations in 2021</h1>
        <h2>A Visualization of the Top 10 Stations</h2>
    </header>

    <div id='map'></div>

    <footer>
		<p>By Sushmita Khan</p>
        <p>Source: <a href=https://new.mta.info/agency/new-york-city-transit/subway-bus-ridership-2021" target="_blank">Subway and bus ridership for 2021</a></p>
    </footer>

    <script src="ridership.js"></script>
    <script>

var map = L.map('map', {
          center: [40.735940, -73.921829],
          zoom: 11.35,
      });
      
      var tiles = L.tileLayer('http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
          subdomains: 'abcd',
          maxZoom: 19
      });  
      
      tiles.addTo(map);
            
function getFillColor(ridership) {
    if (ridership <= 10000000) {
        return '#ffe4b5'; // Moccasin for low ridership
    } else if (ridership <= 16000000) {
        return '#b0e0e6'; // Teal for medium ridership
    } else {
        return '#f08080'; // Salmon for high ridership
    }
}

       L.geoJson(r, {
         
          pointToLayer: function(feature,latlng) {
              console.log(feature.properties.ridership)
              return L.circleMarker(latlng, {
                 color: 'black',
                 weight: .3,
                 fillColor: getFillColor(feature.properties.ridership),
                 fillOpacity: .8,
                 radius: getRadius((feature.properties.ridership))
              });   
          },
    
    onEachFeature : function(feature,layer) {
    layer.on('mouseover', function() {
    layer.setStyle({
        fillColor: '#8fbc8f',
		radius: getRadius(feature.properties.ridership) + 5
    });
});
layer.on('mouseout', function() {
    layer.setStyle({
        fillColor: '#dda0dd',
		radius: getRadius(feature.properties.ridership)
    });
});
          
          var name = feature.properties.name
          var ridership = feature.properties.ridership.toLocaleString()
        
      
                                                
          
          var popup = ("<b style='color:#cd5c5c'>"+name+"</b><br>"
              +ridership+ " people per year" + "<br>")
                       layer.bindPopup(popup)
          }
    }).addTo(map); 
    function getRadius(area){
        var radius = Math.sqrt(area/75000);
        return radius  
    }

var legend = L.control({ position: 'bottomright' });

legend.onAdd = function(map) {
    var div = L.DomUtil.create('div', 'info legend'),
        grades = [0, 10000000, 16000000], 
        labels = ['Low Ridership (Under 10,000,000)', 'Medium Ridership (10,000,001 - 16,000,000)', 'High Ridership (Above 16,000,000)'];

    for (var i = 0; i < grades.length; i++) {
        div.innerHTML +=
            '<i style="background:' + getFillColor(grades[i] + 1) + '; width: 18px; height: 18px; float: left; margin-right: 8px; opacity: 0.8;"></i> ' +
			'<span style="color: #ffefd5;">' + labels[i] + '</span><br>';
    }

    return div;
};

legend.addTo(map);
</script>
    
</body>

</html>